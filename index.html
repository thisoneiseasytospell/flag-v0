<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flag Studio</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<canvas id="flagCanvas"></canvas>

<div class="panel" id="panel">
  <div class="panel-header">
    <div class="panel-title">Flag Studio</div>
    <button class="panel-close" id="panelClose" title="Collapse">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
    </button>
  </div>
  <div class="panel-body">
    <div class="section">
      <div class="section-label">Wind</div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Strength</span><span class="control-value" id="windVal">36</span></div>
        <input type="range" id="windStrength" min="0" max="100" value="36">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Turbulence</span><span class="control-value" id="turbVal">30</span></div>
        <input type="range" id="turbulence" min="0" max="100" value="30">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Direction drift</span><span class="control-value" id="driftVal">24&deg;</span></div>
        <input type="range" id="windDrift" min="0" max="90" value="24">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Direction</span></div>
        <div class="wind-direction-wrap">
          <div class="wind-dial" id="windDial">
            <div class="wind-dial-arrow" id="windArrow"></div>
            <div class="wind-dial-center"></div>
          </div>
          <div class="wind-direction-info">
            <div class="wind-direction-degrees" id="windDeg">90&deg;</div>
            <div class="wind-direction-label" id="windDirLabel">Side</div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-label">Fabric</div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Stiffness</span><span class="control-value" id="stiffVal">40</span></div>
        <input type="range" id="stiffness" min="10" max="100" value="40">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Motion memory</span><span class="control-value" id="dampVal">92</span></div>
        <input type="range" id="damping" min="70" max="99" value="92">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Fabric visibility</span><span class="control-value" id="opacityVal">100%</span></div>
        <input type="range" id="opacity" min="0" max="100" value="100">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Stretch</span><span class="control-value" id="stretchVal">10</span></div>
        <input type="range" id="stretch" min="0" max="140" value="10">
      </div>
      <div class="control-row">
        <div class="control-label"><span class="control-name">Pinning</span></div>
        <div class="pin-toggle" id="pinToggle">
          <button id="pinCorners">Corners</button>
          <button id="pinPoleDense" class="active">Full pole</button>
          <button id="pinCustom">Custom</button>
        </div>
      </div>
      <div class="pin-editor">
        <div class="pin-editor-head">
          <span>Pin map</span>
          <button id="pinClearBtn" type="button">Clear</button>
        </div>
        <div class="pin-map" id="pinMap" title="Click to add pin, drag to move, right-click to remove"></div>
        <div class="pin-editor-help">Click to add pins. Drag to move. Right-click a pin to remove.</div>
      </div>
      <div class="color-row">
        <div class="color-swatch"><input type="color" id="flagColor" value="#e8e6e3"></div>
        <span class="color-label">Fabric colour</span>
      </div>
    </div>

    <div class="section">
      <div class="section-label">Graphic</div>
      <div class="dropzone" id="dropzone">
        <svg class="dropzone-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="3" y="3" width="18" height="18" rx="3"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <path d="M21 15l-5-5L5 21"/>
        </svg>
        <div class="dropzone-text"><strong>Drop PNG or video</strong> or click to browse</div>
        <div class="dropzone-hint">PNG/WebP/JPG/MP4/WebM â€¢ set Fabric visibility to 0% for invisible sheet</div>
        <input type="file" id="fileInput" accept="image/png,image/jpeg,image/webp,video/mp4,video/webm,video/quicktime">
      </div>
      <div class="texture-preview" id="texturePreview" style="display:none;">
        <img id="previewImg" alt="Texture preview">
        <video id="previewVideo" muted loop playsinline></video>
        <button class="texture-remove" id="removeTexture" title="Remove">&times;</button>
      </div>
    </div>

    <div class="section">
      <button class="btn-reset" id="presetTallPoleBtn">Tall Pole Preset</button>
    </div>
    <div class="section">
      <button class="btn-reset" id="resetBtn">Reset all</button>
    </div>
  </div>
</div>

<button class="panel-toggle" id="panelToggle" title="Open controls">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/>
  </svg>
</button>

<div class="watermark">Flag Studio</div>

<div class="view-toggle" id="viewToggle">
  <button id="viewFullscreen" class="active">Fullscreen</button>
  <button id="viewStadium">Stadium</button>
  <span class="toggle-divider"></span>
  <button id="themeDark" class="active">Dark</button>
  <button id="themeLight">Light</button>
</div>

<div class="global-drop-overlay" id="globalDrop">
  <div class="global-drop-content">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="3" y="3" width="18" height="18" rx="3"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/>
    </svg>
    <p>Drop your graphic</p>
    <span>PNG or video texture</span>
  </div>
</div>

<script type="module" src="js/main.js"></script>
</body>
</html>
